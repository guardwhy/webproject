<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>作用域链</title>
  <script type="text/javascript">
	/*
		1.1 ES6之前定义变量通过var
		1.2 ES6之前没有块级作用域, 只有全局作用域和局部作用域
		1.3 ES6之前函数大括号外的都是全局作用域
		1.4 ES6之前函数大括号中的都是局部作用域

	  2.ES6之前作用域链
		2.1.全局作用域我们又称之为0级作用域
		2.2.定义函数开启的作用域就是1级/2级/3级/...作用域
		2.3.JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链
			  0  --->  1 ---->  2  ---->  3 ----> 4
		2.4.除0级作用域以外, 当前作用域级别等于上一级+1

	  3.变量在作用域链查找规则
		3.1先在当前找, 找到就使用当前作用域找到的
		3.2如果当前作用域中没有找到, 就去上一级作用域中查找
		3.3以此类推直到0级为止, 如果0级作用域还没找到, 就报错
	 */

	// 1.ES6之前
	// 定义变量
	var num1 = 23;	// 全局作用域 / 0级作用域

	// 定义fun1函数
	function fun1(){
	  // 1级作用域
	  var num1 = 456;
	  function test(){
	    // 2级作用域
	    var num1 = 33;
	    console.log("num值:" + num1);	// num值:33
	  }
	  // 调用函数
	  test();
	}
	// 调用fun1函数
	fun1();


	// 2.ES6

	/*
	  1.1 ES6定义变量通过let.
	  1.2 ES6除了全局作用域、局部作用域以外, 还新增了块级作用域.
	  1.3 ES6虽然新增了块级作用域, 但是通过let定义变量并无差异(都是局部变量).

	  2.ES6作用域链
        2.1.全局作用域我们又称之为0级作用域
        2.2.定义函数或者代码块都会开启的作用域就是1级/2级/3级/...作用域
        2.3.JavaScript会将这些作用域链接在一起形成一个链条, 这个链条就是作用域链
          0  --->  1 ---->  2  ---->  3 ----> 4
        2.4.除0级作用域以外, 当前作用域级别等于上一级+1

        3.变量在作用域链查找规则
        3.1先在当前找, 找到就使用当前作用域找到的
        3.2如果当前作用域中没有找到, 就去上一级作用域中查找
        3.3以此类推直到0级为止, 如果0级作用域还没找到, 就报错
	 */

    // 全局作用域 / 0级作用域
	let num2 = 123;
	{
      // 1 级作用域
	  let num2 = 45;
	  function test2(){
        // 2 级作用域
	    let num2 = 6;
	    console.log("num2值:" + num2);
	  }
	  // 调用函数
	  test2();
	}
  </script>
</head>
<body>

</body>
</html>